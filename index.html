<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Train Traffic Control System</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
body { font-family: 'Segoe UI', sans-serif; margin:0; background:#f9fafc; }
header { background:linear-gradient(90deg,#1abc9c,#16a085);color:#fff;text-align:center;padding:20px; }
nav { background:#34495e; display:flex; justify-content:center; flex-wrap:wrap; }
nav a { color:white; padding:14px 20px; text-decoration:none; transition:.3s; cursor:pointer; }
nav a:hover { background:#1abc9c; }
.page { display:none; padding:20px; animation:fadeIn .6s ease; }
#map { height:400px; border-radius:10px; margin-top:10px; box-shadow:0 4px 10px rgba(0,0,0,.15);}
button { margin-top:10px; padding:10px 16px; background:#1abc9c; color:white; border:none; border-radius:6px; cursor:pointer; transition:.3s; }
button:hover { background:#16a085; transform:scale(1.05);}
input { width:100%; padding:8px; margin:8px 0; border:1px solid #ccc; border-radius:6px;}
.form-box { max-width:400px; margin:auto; background:white; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,.1);}
.train-card { background:white; padding:15px; margin:10px 0; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,.08);}
.feature-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px; margin-top:20px;}
.feature-card { background:white; padding:20px; border-radius:12px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,.08); transition:.3s;}
.feature-card:hover { transform:translateY(-5px);}
@keyframes fadeIn {from{opacity:0;} to{opacity:1;}}
</style>
</head>
<body>
<header>
  <h1>üöÜ AI Train Traffic Control System</h1>
</header>
<nav>
  <a onclick="navigate('welcome')">Home</a>
  <a onclick="navigate('login')">Login</a>
  <a onclick="navigate('register')">Register</a>
  <a onclick="navigate('dashboard')">Dashboard</a>
  <a onclick="navigate('reports')">Reports</a>
</nav>

<!-- Welcome Page -->
<div id="welcome" class="page">
  <h2>Welcome to AI-Based Railway Traffic Control System</h2>
  <p>The Indian Railways is one of the largest rail networks in the world. AI-based systems help optimize train schedules, reduce delays, and improve safety. Key areas of AI application include:</p>
  <ul>
    <li>üìä <b>Predictive Scheduling:</b> AI predicts congestion and optimizes train timings.</li>
    <li>‚ö° <b>Dynamic Signaling:</b> Automatic adjustment of signals to reduce wait times.</li>
    <li>üöÑ <b>Throughput Optimization:</b> AI increases trains per hour on busy sections.</li>
    <li>üõ°Ô∏è <b>Safety Monitoring:</b> AI monitors speed, track conditions, and potential collisions.</li>
    <li>üí° <b>Energy Efficiency:</b> Smooth train operations reduce fuel/electricity usage.</li>
  </ul>
  <div class="feature-grid">
    <div class="feature-card"><h3>AI Monitoring</h3><p>Real-time monitoring for safer journeys.</p></div>
    <div class="feature-card"><h3>Predict Delays</h3><p>AI predicts delays and optimizes routes.</p></div>
    <div class="feature-card"><h3>Optimize Throughput</h3><p>Increase the number of trains per hour efficiently.</p></div>
    <div class="feature-card"><h3>Passenger Safety</h3><p>Alerts and control reduce accidents.</p></div>
  </div>
</div>

<!-- Login Page -->
<div id="login" class="page">
  <div class="form-box">
    <h2>Login</h2>
    <input type="text" id="login-username" placeholder="Username">
    <input type="password" id="login-password" placeholder="Password">
    <button onclick="login()">Login</button>
  </div>
</div>

<!-- Registration Page -->
<div id="register" class="page">
  <div class="form-box">
    <h2>Register</h2>
    <input type="text" id="reg-username" placeholder="Username">
    <input type="email" id="reg-email" placeholder="Email">
    <input type="password" id="reg-password" placeholder="Password">
    <button onclick="register()">Register</button>
  </div>
</div>

<!-- Dashboard Page -->
<div id="dashboard" class="page">
  <h2>Live Dashboard</h2>
  <div class="train-card">
    <h3>üîç Search Train by Number</h3>
    <input type="text" id="dashboard-train-search" placeholder="Enter Train Number (e.g., 12345)">
    <button onclick="searchTrainDashboard()">Search</button>
    <div id="dashboard-search-result"></div>
  </div>
  <div id="map"></div>
  <h3 style="margin-top:15px;">Train Details</h3>
  <div id="train-details"></div>
</div>

<!-- Reports Page -->
<div id="reports" class="page">
  <h2>Reports</h2>
  <p>This page displays the AI-optimized train statistics. After searching a train, its basic details are recorded here.</p>
  <div id="report-content"></div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
let isLoggedIn = false;

// Train Data
let trainRoutes = {
  "12345": { name:"Rajdhani Express", route:[[28.61,77.20],[26.44,80.33],[25.44,81.85],[22.57,88.36]], stations:["Delhi","Kanpur","Prayagraj","Kolkata"] },
  "12627": { name:"Karnataka Express", route:[[28.61,77.20],[23.25,77.41],[21.14,79.08],[12.97,77.59]], stations:["Delhi","Bhopal","Nagpur","Bengaluru"] },
  "12034": { name:"Shatabdi Express", route:[[28.61,77.20],[27.17,78.01],[26.84,80.94]], stations:["Delhi","Agra","Lucknow"] },
  "12951": { name:"Mumbai Rajdhani", route:[[28.61,77.20],[25.43,81.84],[19.07,72.87]], stations:["Delhi","Prayagraj","Mumbai"] },
  "12801": { name:"Purushottam Exp", route:[[28.61,77.20],[25.61,85.13],[20.27,85.84]], stations:["Delhi","Patna","Bhubaneswar"] },
  "12423": { name:"Rajdhani Jammu", route:[[28.61,77.20],[30.73,76.77],[32.73,74.86]], stations:["Delhi","Chandigarh","Jammu"] },
  "12245": { name:"Duronto Express", route:[[19.07,72.87],[22.57,88.36]], stations:["Mumbai","Kolkata"] },
  "12673": { name:"Cheran Express", route:[[13.08,80.27],[11.01,76.96]], stations:["Chennai","Coimbatore"] },
  "12163": { name:"LTT Express", route:[[19.07,72.87],[23.02,72.57],[26.91,75.78]], stations:["Mumbai","Ahmedabad","Jaipur"] },
  "12533": { name:"Pushpak Express", route:[[28.61,77.20],[26.84,80.94],[19.07,72.87]], stations:["Delhi","Lucknow","Mumbai"] }
};

// Page switching
function navigate(pageId){
  if(!isLoggedIn && pageId!=='login' && pageId!=='register'){
    alert("‚ùå Please login or register first!");
    showPage('login');
    return;
  }
  showPage(pageId);
}

function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.style.display='none');
  document.getElementById(id).style.display='block';
  if(id==='dashboard'){ setTimeout(()=>{map.invalidateSize();},200); }
}

// Login/Register
function login(){
  isLoggedIn = true;
  alert("Login successful!");
  showPage('welcome');
}
function register(){
  isLoggedIn = true;
  alert("Registration successful! Please login.");
  showPage('login');
}

// Map setup
let map = L.map('map').setView([23.0,80.0],5);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; OpenStreetMap'}).addTo(map);

let trainMarkers={}, trainPolylines={}, activePolyline, activeMarker;

// Initialize trains
Object.keys(trainRoutes).forEach(no=>{
  let t=trainRoutes[no];
  let poly=L.polyline(t.route,{color:'blue'}).addTo(map);
  let marker=L.marker(t.route[0]).addTo(map).bindPopup(t.name);
  trainMarkers[no]={marker,route:t.route,index:0};
  trainPolylines[no]=poly;
});

// Animate all markers slowly along route
setInterval(()=>{
  Object.keys(trainMarkers).forEach(no=>{
    let tr=trainMarkers[no];
    tr.index=(tr.index+1)%tr.route.length;
    tr.marker.setLatLng(tr.route[tr.index]);
  });
},3000);

// Search & show train details
function showTrainDetails(trainNo){
  let t = trainRoutes[trainNo];
  if(!t) return;
  document.getElementById("train-details").innerHTML = `
    <h3>${t.name} (${trainNo})</h3>
    <p>Stations: ${t.stations.join(" ‚Üí ")}</p>
    <p>Next throughput: ${Math.floor(Math.random()*100)+50} trains/hour</p>
    <p>Delay: ${Math.floor(Math.random()*10)} min</p>
  `;
}

function searchTrainDashboard(){
  let num=document.getElementById("dashboard-train-search").value.trim();
  let div=document.getElementById("dashboard-search-result");
  let t=trainRoutes[num];
  if(!t){ div.innerHTML="<p style='color:red;'>‚ùå Train not found!</p>"; return; }

  div.innerHTML=`<div class="train-card">
    <h3>${t.name} (${num})</h3>
    <p>Stations: ${t.stations.join(" ‚Üí ")}</p>
    <p>Total Sections: ${t.route.length-1}</p>
    <p>Throughput: ${Math.floor(Math.random()*100)+50} trains/hour</p>
    <p>Delay: ${Math.floor(Math.random()*10)} min</p>
    <button onclick="showTrainOnMap('${num}')">Show on Map</button>
  </div>`;

  document.getElementById("report-content").innerHTML = div.innerHTML;
}

// Show train on map
function showTrainOnMap(trainNo){
  let t=trainRoutes[trainNo];
  if(activePolyline) map.removeLayer(activePolyline);
  if(activeMarker) map.removeLayer(activeMarker);

  activePolyline = L.polyline(t.route,{color:'red'}).addTo(map);
  map.fitBounds(activePolyline.getBounds());
  let idx=0;
  activeMarker=L.marker(t.route[idx]).addTo(map).bindPopup(t.name).openPopup();

  setInterval(()=>{
    idx=(idx+1)%t.route.length;
    activeMarker.setLatLng(t.route[idx]);
  },3000);

  showTrainDetails(trainNo);
  showPage('dashboard');
}
</script>
</body>
</html>
